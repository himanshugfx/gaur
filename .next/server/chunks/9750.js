"use strict";exports.id=9750,exports.ids=[9750],exports.modules={5497:(a,b,c)=>{c.d(b,{UE:()=>f,sL:()=>e});var d=c(62796),e=class extends Error{name="DriverAdapterError";cause;constructor(a){super("string"==typeof a.message?a.message:a.kind),this.cause=a}};(0,d.y)("driver-adapter-utils");var f={Int32:0,Int64:1,Float:2,Double:3,Numeric:4,Boolean:5,Character:6,Text:7,Date:8,Time:9,DateTime:10,Json:11,Enum:12,Bytes:13,Set:14,Uuid:15,Int32Array:64,Int64Array:65,FloatArray:66,DoubleArray:67,NumericArray:68,BooleanArray:69,CharacterArray:70,TextArray:71,DateArray:72,TimeArray:73,DateTimeArray:74,JsonArray:75,EnumArray:76,BytesArray:77,UuidArray:78,UnknownNumber:128};Error("Not implemented: queryRaw"),Error("Not implemented: executeRaw"),Error("Not implemented: startTransaction"),Error("Not implemented: executeScript"),Error("Not implemented: dispose")},24645:(a,b)=>{function c(a){let b=null!=a;return function(c){let d=c.length-1;if(1===d)return[];if("}"!==c[d])throw Error("Invalid array text - must end with }");let e=0;if("["===c[0]&&(e=c.indexOf("=")+1),"{"!==c[e++])throw Error("Invalid array text - must start with {");let f=[],g=f,h=[],i=e,j="",k=!0;for(;e<d;++e){let f=c[e];if('"'===f){i=++e;let d=c.indexOf('"',i),f=c.indexOf("\\",i);for(;-1!==f&&f<d;)e=f,j+=c.slice(i,e),i=++e,d===e++&&(d=c.indexOf('"',e)),f=c.indexOf("\\",e);e=d,j+=c.slice(i,e),g.push(b?a(j):j),j="",k=!1}else if("{"===f){let a=[];g.push(a),h.push(g),g=a,i=e+1,k=!0}else if(","===f)k=!0;else if("}"===f){k=!1;let a=h.pop();if(void 0===a)throw Error("Invalid array text - too many '}'");g=a}else if(k){for(i=e;","!==(f=c[e])&&"}"!==f&&e<d;)++e;let h=c.slice(i,e--);g.push("NULL"===h?null:b?a(h):h),k=!1}else throw Error("Was expecting delimeter")}return f}}let d=c();b.q=(a,b)=>null!=b?c(b)(a):d(a)},49750:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{M:()=>H});var e=c(62796),f=c(5497),g=c(64939),h=c(24645),i=a([g]);g=(i.then?(await i)():i)[0];var j="@prisma/adapter-pg",{types:k}=g.default,{builtins:l,getTypeParser:m}=k,n=class a extends Error{static typeNames={16:"bool",17:"bytea",18:"char",19:"name",20:"int8",21:"int2",22:"int2vector",23:"int4",24:"regproc",25:"text",26:"oid",27:"tid",28:"xid",29:"cid",30:"oidvector",32:"pg_ddl_command",71:"pg_type",75:"pg_attribute",81:"pg_proc",83:"pg_class",114:"json",142:"xml",194:"pg_node_tree",269:"table_am_handler",325:"index_am_handler",600:"point",601:"lseg",602:"path",603:"box",604:"polygon",628:"line",650:"cidr",700:"float4",701:"float8",705:"unknown",718:"circle",774:"macaddr8",790:"money",829:"macaddr",869:"inet",1033:"aclitem",1042:"bpchar",1043:"varchar",1082:"date",1083:"time",1114:"timestamp",1184:"timestamptz",1186:"interval",1266:"timetz",1560:"bit",1562:"varbit",1700:"numeric",1790:"refcursor",2202:"regprocedure",2203:"regoper",2204:"regoperator",2205:"regclass",2206:"regtype",2249:"record",2275:"cstring",2276:"any",2277:"anyarray",2278:"void",2279:"trigger",2280:"language_handler",2281:"internal",2283:"anyelement",2287:"_record",2776:"anynonarray",2950:"uuid",2970:"txid_snapshot",3115:"fdw_handler",3220:"pg_lsn",3310:"tsm_handler",3361:"pg_ndistinct",3402:"pg_dependencies",3500:"anyenum",3614:"tsvector",3615:"tsquery",3642:"gtsvector",3734:"regconfig",3769:"regdictionary",3802:"jsonb",3831:"anyrange",3838:"event_trigger",3904:"int4range",3906:"numrange",3908:"tsrange",3910:"tstzrange",3912:"daterange",3926:"int8range",4072:"jsonpath",4089:"regnamespace",4096:"regrole",4191:"regcollation",4451:"int4multirange",4532:"nummultirange",4533:"tsmultirange",4534:"tstzmultirange",4535:"datemultirange",4536:"int8multirange",4537:"anymultirange",4538:"anycompatiblemultirange",4600:"pg_brin_bloom_summary",4601:"pg_brin_minmax_multi_summary",5017:"pg_mcv_list",5038:"pg_snapshot",5069:"xid8",5077:"anycompatible",5078:"anycompatiblearray",5079:"anycompatiblenonarray",5080:"anycompatiblerange"};type;constructor(b){super(),this.type=a.typeNames[b]||"Unknown",this.message=`Unsupported column type ${this.type}`}};function o(a){return b=>(0,h.q)(b,a)}function p(a){return a}function q(a){return a}function r(a){return`${a.replace(" ","T")}+00:00`}function s(a){return a.replace(" ","T").replace(/[+-]\d{2}(:\d{2})?$/,"+00:00")}function t(a){return a}function u(a){return a.slice(1)}function v(a){return a}var w=m(l.BYTEA),x=m(1001);function y(a){return a}var z={[l.NUMERIC]:p,1231:o(p),[l.TIME]:t,1183:o(t),[l.TIMETZ]:function(a){return a.replace(/[+-]\d{2}(:\d{2})?$/,"")},[l.DATE]:q,1182:o(q),[l.TIMESTAMP]:r,1115:o(r),[l.TIMESTAMPTZ]:s,1185:o(s),[l.MONEY]:u,791:o(u),[l.JSON]:v,199:o(v),[l.JSONB]:v,3807:o(v),[l.BYTEA]:function(a){return w(a)},1001:x,1561:o(y),1563:o(y),143:o(function(a){return a})},A=new Set(["UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED","HOSTNAME_MISMATCH","ERR_TLS_CERT_ALTNAME_FORMAT","ERR_TLS_CERT_ALTNAME_INVALID"]),B=new Set(["ENOTFOUND","ECONNREFUSED","ECONNRESET","ETIMEDOUT"]),C=g.default.types,D=(0,e.y)("prisma:driver-adapter:pg"),E=class{constructor(a,b){this.client=a,this.pgOptions=b}provider="postgres";adapterName=j;async queryRaw(a){D("[js::query_raw] %O",a);let{fields:b,rows:c}=await this.performIO(a),d=b.map(a=>a.name),e=[];try{e=b.map(a=>(function(a){switch(a){case l.INT2:case l.INT4:return f.UE.Int32;case l.INT8:return f.UE.Int64;case l.FLOAT4:return f.UE.Float;case l.FLOAT8:return f.UE.Double;case l.BOOL:return f.UE.Boolean;case l.DATE:return f.UE.Date;case l.TIME:case l.TIMETZ:return f.UE.Time;case l.TIMESTAMP:case l.TIMESTAMPTZ:return f.UE.DateTime;case l.NUMERIC:case l.MONEY:return f.UE.Numeric;case l.JSON:case l.JSONB:return f.UE.Json;case l.UUID:return f.UE.Uuid;case l.OID:return f.UE.Int64;case l.BPCHAR:case l.TEXT:case l.VARCHAR:case l.BIT:case l.VARBIT:case l.INET:case l.CIDR:case l.XML:case 19:return f.UE.Text;case l.BYTEA:return f.UE.Bytes;case 1005:case 1007:return f.UE.Int32Array;case 1021:return f.UE.FloatArray;case 1022:return f.UE.DoubleArray;case 1231:case 791:return f.UE.NumericArray;case 1e3:return f.UE.BooleanArray;case 1002:return f.UE.CharacterArray;case 1014:case 1009:case 1015:case 1563:case 1561:case 1041:case 651:case 143:return f.UE.TextArray;case 1182:return f.UE.DateArray;case 1183:return f.UE.TimeArray;case 1115:case 1185:return f.UE.DateTimeArray;case 199:case 3807:return f.UE.JsonArray;case 1001:return f.UE.BytesArray;case 2951:return f.UE.UuidArray;case 1016:case 1028:return f.UE.Int64Array;default:if(a>=16384)return f.UE.Text;throw new n(a)}})(a.dataTypeID))}catch(a){if(a instanceof n)throw new f.sL({kind:"UnsupportedNativeDataType",type:a.type});throw a}let g=this.pgOptions?.userDefinedTypeParser;if(g)for(let a=0;a<b.length;a++){let d=b[a];if(d.dataTypeID>=16384&&!Object.hasOwn(z,d.dataTypeID))for(let b=0;b<c.length;b++)c[b][a]=await g(d.dataTypeID,c[b][a],this)}return{columnNames:d,columnTypes:e,rows:c}}async executeRaw(a){return D("[js::execute_raw] %O",a),(await this.performIO(a)).rowCount??0}async performIO(a){let{sql:b,args:c}=a,d=c.map((b,c)=>(function a(b,c){var d,e,f;if(null===b)return null;if(Array.isArray(b)&&"list"===c.arity)return b.map(b=>a(b,c));if("string"==typeof b&&"datetime"===c.scalarType&&(b=new Date(b)),b instanceof Date)switch(c.dbType){case"TIME":case"TIMETZ":let g,h;return d=b,g=(a,b=2)=>String(a).padStart(b,"0"),h=d.getUTCMilliseconds(),g(d.getUTCHours())+":"+g(d.getUTCMinutes())+":"+g(d.getUTCSeconds())+(h?"."+String(h).padStart(3,"0"):"");case"DATE":let i;return e=b,(i=(a,b=2)=>String(a).padStart(b,"0"))(e.getUTCFullYear(),4)+"-"+i(e.getUTCMonth()+1)+"-"+i(e.getUTCDate());default:let j,k;return f=b,j=(a,b=2)=>String(a).padStart(b,"0"),k=f.getUTCMilliseconds(),j(f.getUTCFullYear(),4)+"-"+j(f.getUTCMonth()+1)+"-"+j(f.getUTCDate())+" "+j(f.getUTCHours())+":"+j(f.getUTCMinutes())+":"+j(f.getUTCSeconds())+(k?"."+String(k).padStart(3,"0"):"")}return"string"==typeof b&&"bytes"===c.scalarType?Buffer.from(b,"base64"):ArrayBuffer.isView(b)?new Uint8Array(b.buffer,b.byteOffset,b.byteLength):b})(b,a.argTypes[c]));try{return await this.client.query({text:b,values:d,rowMode:"array",types:{getTypeParser:(a,b)=>"text"===b&&z[a]?z[a]:C.getTypeParser(a,b)}},d)}catch(a){this.onError(a)}}onError(a){throw D("Error in performIO: %O",a),new f.sL(function(a){if(b=a,"string"==typeof b.code&&"string"==typeof b.syscall&&"number"==typeof b.errno&&B.has(b.code)){var b,c,d=a;switch(d.code){case"ENOTFOUND":case"ECONNREFUSED":return{kind:"DatabaseNotReachable",host:d.address??d.hostname,port:d.port};case"ECONNRESET":return{kind:"ConnectionClosed"};case"ETIMEDOUT":return{kind:"SocketTimeout"}}return}if(function(a){if("string"==typeof a.code)return A.has(a.code);switch(a.message){case"The server does not support SSL connections":case"There was an error establishing an SSL connection":return!0}return!1}(a))return{kind:"TlsConnectionError",reason:a.message};if(c=a,"string"==typeof c.code&&"string"==typeof c.message&&"string"==typeof c.severity&&("string"==typeof c.detail||void 0===c.detail)&&("string"==typeof c.column||void 0===c.column)&&("string"==typeof c.hint||void 0===c.hint))return{originalCode:a.code,originalMessage:a.message,...function(a){switch(a.code){case"22001":return{kind:"LengthMismatch",column:a.column};case"22003":return{kind:"ValueOutOfRange",cause:a.message};case"22P02":return{kind:"InvalidInputValue",message:a.message};case"23505":{let b=a.detail?.match(/Key \(([^)]+)\)/)?.at(1)?.split(", ");return{kind:"UniqueConstraintViolation",constraint:void 0!==b?{fields:b}:void 0}}case"23502":{let b=a.detail?.match(/Key \(([^)]+)\)/)?.at(1)?.split(", ");return{kind:"NullConstraintViolation",constraint:void 0!==b?{fields:b}:void 0}}case"23503":{let b;return a.column?b={fields:[a.column]}:a.constraint&&(b={index:a.constraint}),{kind:"ForeignKeyConstraintViolation",constraint:b}}case"3D000":return{kind:"DatabaseDoesNotExist",db:a.message.split(" ").at(1)?.split('"').at(1)};case"28000":return{kind:"DatabaseAccessDenied",db:a.message.split(",").find(a=>a.startsWith(" database"))?.split('"').at(1)};case"28P01":return{kind:"AuthenticationFailed",user:a.message.split(" ").pop()?.split('"').at(1)};case"40001":return{kind:"TransactionWriteConflict"};case"42P01":return{kind:"TableDoesNotExist",table:a.message.split(" ").at(1)?.split('"').at(1)};case"42703":return{kind:"ColumnNotFound",column:a.message.split(" ").at(1)?.split('"').at(1)};case"42P04":return{kind:"DatabaseAlreadyExists",db:a.message.split(" ").at(1)?.split('"').at(1)};case"53300":return{kind:"TooManyConnections",cause:a.message};default:return{kind:"postgres",code:a.code??"N/A",severity:a.severity??"N/A",message:a.message,detail:a.detail,column:a.column,hint:a.hint}}}(a)};throw a}(a))}},F=class extends E{constructor(a,b,c,d){super(a,c),this.options=b,this.pgOptions=c,this.cleanup=d}async commit(){D("[js::commit]"),this.cleanup?.(),this.client.release()}async rollback(){D("[js::rollback]"),this.cleanup?.(),this.client.release()}},G=class extends E{constructor(a,b,c){super(a),this.pgOptions=b,this.release=c}async startTransaction(a){let b={usePhantomQuery:!1};D("%s options: %O","[js::startTransaction]",b);let c=await this.client.connect().catch(a=>this.onError(a)),d=a=>{D(`Error from pool connection: ${a.message} %O`,a),this.pgOptions?.onConnectionError?.(a)};c.on("error",d);let e=()=>{c.removeListener("error",d)};try{let d=new F(c,b,this.pgOptions,e);return await d.executeRaw({sql:"BEGIN",args:[],argTypes:[]}),a&&await d.executeRaw({sql:`SET TRANSACTION ISOLATION LEVEL ${a}`,args:[],argTypes:[]}),d}catch(a){e(),c.release(a),this.onError(a)}}async executeScript(a){for(let b of a.split(";").map(a=>a.trim()).filter(a=>a.length>0))try{await this.client.query(b)}catch(a){this.onError(a)}}getConnectionInfo(){return{schemaName:this.pgOptions?.schema,supportsRelationJoins:!0}}async dispose(){return this.release?.()}underlyingDriver(){return this.client}},H=class{constructor(a,b){this.options=b,a instanceof g.default.Pool?(this.externalPool=a,this.config=a.options):(this.externalPool=null,this.config=a)}provider="postgres";adapterName=j;config;externalPool;async connect(){let a=this.externalPool??new g.default.Pool(this.config),b=a=>{D(`Error from idle pool client: ${a.message} %O`,a),this.options?.onPoolError?.(a)};return a.on("error",b),new G(a,this.options,async()=>{this.externalPool?this.options?.disposeExternalPool?(await this.externalPool.end(),this.externalPool=null):this.externalPool.removeListener("error",b):await a.end()})}async connectToShadowDb(){let a=await this.connect(),b=`prisma_migrate_shadow_db_${globalThis.crypto.randomUUID()}`;await a.executeScript(`CREATE DATABASE "${b}"`);let c=new g.default.Pool({...this.config,database:b});return new G(c,void 0,async()=>{await a.executeScript(`DROP DATABASE "${b}"`),await c.end()})}};d()}catch(a){d(a)}})},62796:(a,b,c)=>{c.d(b,{y:()=>U});var d,e,f,g,h=Object.defineProperty,i={},j={$:()=>m,bgBlack:()=>G,bgBlue:()=>K,bgCyan:()=>M,bgGreen:()=>I,bgMagenta:()=>L,bgRed:()=>H,bgWhite:()=>N,bgYellow:()=>J,black:()=>w,blue:()=>A,bold:()=>p,cyan:()=>C,dim:()=>q,gray:()=>E,green:()=>y,grey:()=>F,hidden:()=>u,inverse:()=>t,italic:()=>r,magenta:()=>B,red:()=>x,reset:()=>o,strikethrough:()=>v,underline:()=>s,white:()=>D,yellow:()=>z};for(var k in j)h(i,k,{get:j[k],enumerable:!0});var l=!0;"undefined"!=typeof process&&({FORCE_COLOR:d,NODE_DISABLE_COLORS:e,NO_COLOR:f,TERM:g}=process.env||{},l=process.stdout&&process.stdout.isTTY);var m={enabled:!e&&null==f&&"dumb"!==g&&(null!=d&&"0"!==d||l)};function n(a,b){let c=RegExp(`\\x1b\\[${b}m`,"g"),d=`\x1b[${a}m`,e=`\x1b[${b}m`;return function(a){return m.enabled&&null!=a?d+(~(""+a).indexOf(e)?a.replace(c,e+d):a)+e:a}}var o=n(0,0),p=n(1,22),q=n(2,22),r=n(3,23),s=n(4,24),t=n(7,27),u=n(8,28),v=n(9,29),w=n(30,39),x=n(31,39),y=n(32,39),z=n(33,39),A=n(34,39),B=n(35,39),C=n(36,39),D=n(37,39),E=n(90,39),F=n(90,39),G=n(40,49),H=n(41,49),I=n(42,49),J=n(43,49),K=n(44,49),L=n(45,49),M=n(46,49),N=n(47,49),O=["green","yellow","blue","magenta","cyan","red"],P=[],Q=Date.now(),R=0,S="undefined"!=typeof process?process.env:{};globalThis.DEBUG??=S.DEBUG??"",globalThis.DEBUG_COLORS??=!S.DEBUG_COLORS||"true"===S.DEBUG_COLORS;var T={enable(a){"string"==typeof a&&(globalThis.DEBUG=a)},disable(){let a=globalThis.DEBUG;return globalThis.DEBUG="",a},enabled(a){let b=globalThis.DEBUG.split(",").map(a=>a.replace(/[.+?^${}()|[\]\\]/g,"\\$&")),c=b.some(b=>""!==b&&"-"!==b[0]&&a.match(RegExp(b.split("*").join(".*")+"$"))),d=b.some(b=>""!==b&&"-"===b[0]&&a.match(RegExp(b.slice(1).split("*").join(".*")+"$")));return c&&!d},log:(...a)=>{let[b,c,...d]=a;(console.warn??console.log)(`${b} ${c}`,...d)},formatters:{}},U=new Proxy(function(a){let b={color:O[R++%O.length],enabled:T.enabled(a),namespace:a,log:T.log,extend:()=>{}};return new Proxy((...a)=>{let{enabled:c,namespace:d,color:e,log:f}=b;if(0!==a.length&&P.push([d,...a]),P.length>100&&P.shift(),T.enabled(d)||c){let b=a.map(a=>"string"==typeof a?a:function(a,b=2){let c=new Set;return JSON.stringify(a,(a,b)=>{if("object"==typeof b&&null!==b){if(c.has(b))return"[Circular *]";c.add(b)}else if("bigint"==typeof b)return b.toString();return b},b)}(a)),c=`+${Date.now()-Q}ms`;Q=Date.now(),globalThis.DEBUG_COLORS?f(i[e](p(d)),...b,i[e](c)):f(d,...b,c)}},{get:(a,c)=>b[c],set:(a,c,d)=>b[c]=d})},{get:(a,b)=>T[b],set:(a,b,c)=>T[b]=c})}};