(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5384],{6123:(e,r,a)=>{Promise.resolve().then(a.bind(a,8688))},8688:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>h});var s=a(5155),l=a(2115),t=a(1921),i=a(3321),n=a(6296),o=a(723),c=a(49),d=a(3210),m=a(1914),u=a(8500),p=a.n(u),g=a(1152);let x=[{value:"COSMETIC",label:"Cosmetics",fields:["sizes","packing"]},{value:"DENTAL_KIT",label:"Dental Kit",fields:["contents","packing"]},{value:"SHAVING_KIT",label:"Shaving Kit",fields:["contents","packing"]},{value:"VANITY_KIT",label:"Vanity Kit",fields:["contents","packing"]},{value:"SLIPPER",label:"Slipper",fields:["material","color","dimensions"]},{value:"COASTER",label:"Coaster",fields:["material","color","dimensions"]},{value:"LAUNDRY_BAG",label:"Laundry Bag",fields:["material","color","dimensions"]},{value:"GARBAGE_BAG",label:"Garbage Bag",fields:["material","color","dimensions"]},{value:"SHOWER_CAP",label:"Shower Cap",fields:["material","color"]},{value:"COMB",label:"Comb",fields:["material","color","dimensions"]},{value:"OTHER",label:"Other",fields:["material","dimensions"]}];function h({params:e}){let{id:r}=(0,l.use)(e),a=(0,i.useRouter)(),[u,h]=(0,l.useState)(!0),[b,f]=(0,l.useState)(!1),[y,j]=(0,l.useState)({name:"",category:"COSMETIC",description:"",image:"",price:"",minOrderQty:"100",sizes:"",packing:"",contents:"",material:"",dimensions:"",color:"",isActive:!0,priority:"0"}),[v,N]=(0,l.useState)([""]),[C,k]=(0,l.useState)([""]),w=x.find(e=>e.value===y.category),A=w?.fields||[];(0,l.useEffect)(()=>{S()},[r]);let S=async()=>{try{let e=await fetch(`/api/admin/hotel-catalogue/${r}`);if(!e.ok)throw Error("Amenity not found");let a=await e.json();if(j({name:a.name||"",category:a.category||"COSMETIC",description:a.description||"",image:a.image||"",price:a.price?.toString()||"",minOrderQty:a.minOrderQty?.toString()||"100",sizes:a.sizes||"",packing:a.packing||"",contents:a.contents||"",material:a.material||"",dimensions:a.dimensions||"",color:a.color||"",isActive:!1!==a.isActive,priority:a.priority?.toString()||"0"}),a.sizes)try{let e=JSON.parse(a.sizes);N(Array.isArray(e)?e:[e])}catch{N([a.sizes])}if(a.contents)try{let e=JSON.parse(a.contents);k(Array.isArray(e)?e:[e])}catch{k([a.contents])}}catch(e){console.error("Error fetching amenity:",e),alert("Failed to load amenity"),a.push("/admin/hotel-catalogue")}finally{h(!1)}},O=async e=>{e.preventDefault(),f(!0);try{let e={...y,sizes:v.filter(Boolean).length>0?JSON.stringify(v.filter(Boolean)):null,contents:C.filter(Boolean).length>0?JSON.stringify(C.filter(Boolean)):null},s=await fetch(`/api/admin/hotel-catalogue/${r}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(s.ok)a.push("/admin/hotel-catalogue");else{let e=await s.json();alert(e.error||"Failed to update amenity")}}catch(e){console.error("Error updating amenity:",e),alert("Failed to update amenity")}finally{f(!1)}},E=e=>{let{name:r,value:a,type:s}=e.target;if("checkbox"===s){let a=e.target.checked;j(e=>({...e,[r]:a}))}else j(e=>({...e,[r]:a}))};return u?(0,s.jsx)(t.default,{children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-20",children:[(0,s.jsx)(n.A,{className:"w-8 h-8 text-purple-600 animate-spin"}),(0,s.jsx)("p",{className:"text-gray-500 mt-3",children:"Loading amenity..."})]})}):(0,s.jsx)(t.default,{children:(0,s.jsxs)("div",{className:"max-w-4xl space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(p(),{href:"/admin/hotel-catalogue",className:"p-2 bg-black text-white rounded-lg transition-colors",children:(0,s.jsx)(o.A,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[(0,s.jsx)(c.A,{className:"w-8 h-8 text-purple-600"}),"Edit Amenity"]}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Update hotel amenity details"})]})]}),(0,s.jsxs)("form",{onSubmit:O,className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-8 space-y-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Basic Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),(0,s.jsx)("input",{type:"text",name:"name",value:y.name,onChange:E,required:!0,placeholder:"e.g., Luxury Shampoo",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),(0,s.jsx)("select",{name:"category",value:y.category,onChange:E,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:x.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority (Higher = First)"}),(0,s.jsx)("input",{type:"number",name:"priority",value:y.priority,onChange:E,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,s.jsx)("textarea",{name:"description",value:y.description,onChange:E,rows:3,placeholder:"Describe the product features, benefits, etc.",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Product Image"}),(0,s.jsx)(g.A,{label:"Upload Product Image *",value:y.image,onChange:e=>j(r=>({...r,image:e})),type:"image"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Pricing"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price per Unit (â‚¹) *"}),(0,s.jsx)("input",{type:"number",name:"price",value:y.price,onChange:E,required:!0,step:"0.01",min:"0",placeholder:"e.g., 10.00",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Order Quantity"}),(0,s.jsx)("input",{type:"number",name:"minOrderQty",value:y.minOrderQty,onChange:E,min:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Product Details"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[A.includes("sizes")&&(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Available Sizes"}),(0,s.jsxs)("div",{className:"space-y-2",children:[v.map((e,r)=>(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"text",value:e,onChange:e=>{var a;let s;return a=e.target.value,void((s=[...v])[r]=a,N(s))},placeholder:"e.g., 30ml, 50ml, 100ml",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),v.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>N(v.filter((e,a)=>a!==r)),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg",children:(0,s.jsx)(d.A,{className:"w-5 h-5"})})]},r)),(0,s.jsxs)("button",{type:"button",onClick:()=>N([...v,""]),className:"flex items-center gap-1 text-sm text-purple-600 hover:text-purple-700",children:[(0,s.jsx)(m.A,{className:"w-4 h-4"}),"Add Size"]})]})]}),A.includes("packing")&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Packing"}),(0,s.jsx)("input",{type:"text",name:"packing",value:y.packing,onChange:E,placeholder:"e.g., Box of 100",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),A.includes("contents")&&(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kit Contents"}),(0,s.jsxs)("div",{className:"space-y-2",children:[C.map((e,r)=>(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"text",value:e,onChange:e=>{var a;let s;return a=e.target.value,void((s=[...C])[r]=a,k(s))},placeholder:"e.g., Toothbrush, Toothpaste (10g)",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),C.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>k(C.filter((e,a)=>a!==r)),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg",children:(0,s.jsx)(d.A,{className:"w-5 h-5"})})]},r)),(0,s.jsxs)("button",{type:"button",onClick:()=>k([...C,""]),className:"flex items-center gap-1 text-sm text-purple-600 hover:text-purple-700",children:[(0,s.jsx)(m.A,{className:"w-4 h-4"}),"Add Item"]})]})]}),A.includes("material")&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Material"}),(0,s.jsx)("input",{type:"text",name:"material",value:y.material,onChange:E,placeholder:"e.g., Non-woven fabric",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),A.includes("color")&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Available Colors"}),(0,s.jsx)("input",{type:"text",name:"color",value:y.color,onChange:E,placeholder:"e.g., White, Brown, Grey",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),A.includes("dimensions")&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dimensions / Sizes"}),(0,s.jsx)("input",{type:"text",name:"dimensions",value:y.dimensions,onChange:E,placeholder:"e.g., Small, Medium, Large or 40x30cm",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]})]}),(0,s.jsx)("div",{children:(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",name:"isActive",checked:y.isActive,onChange:E,className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Active (visible in catalogue)"})]})}),(0,s.jsxs)("div",{className:"flex items-center justify-end gap-4 pt-4 border-t border-gray-200",children:[(0,s.jsx)(p(),{href:"/admin/hotel-catalogue",className:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:b,className:"px-6 py-2 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:b?"Saving...":"Save Changes"})]})]})]})})}}},e=>{e.O(0,[8500,1921,7052,8441,3794,7358],()=>e(e.s=6123)),_N_E=e.O()}]);