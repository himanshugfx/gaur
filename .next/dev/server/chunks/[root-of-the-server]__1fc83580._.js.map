{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 48, "column": 0}, "map": {"version":3,"sources":["file:///D:/Himanshu%20Kumar/Anti%20gravity/gaur/src/lib/prisma.ts"],"sourcesContent":["import { Pool } from 'pg'\r\nimport { PrismaPg } from '@prisma/adapter-pg'\r\nimport { PrismaClient } from '@prisma/client'\r\n\r\nconst globalForPrisma = global as unknown as { prisma: PrismaClient }\r\n\r\nconst connectionString = process.env.DATABASE_URL\r\n\r\nconst pool = new Pool({ connectionString })\r\nconst adapter = new PrismaPg(pool)\r\n\r\nexport const prisma = globalForPrisma.prisma || new PrismaClient({ adapter })\r\n\r\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;;;;;AAEA,MAAM;AAEN,MAAM,mBAAmB,QAAQ,GAAG,CAAC,YAAY;AAEjD,MAAM,OAAO,IAAI,qJAAI,CAAC;IAAE;AAAiB;AACzC,MAAM,UAAU,IAAI,yKAAQ,CAAC;AAEtB,MAAM,SAAS,gBAAgB,MAAM,IAAI,IAAI,sMAAY,CAAC;IAAE;AAAQ;AAE3E,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 84, "column": 0}, "map": {"version":3,"sources":["file:///D:/Himanshu%20Kumar/Anti%20gravity/gaur/src/lib/auth.ts"],"sourcesContent":["\r\nimport { SignJWT, jwtVerify } from 'jose'\r\nimport bcrypt from 'bcryptjs'\r\n\r\nconst SECRET_KEY = new TextEncoder().encode(process.env.JWT_SECRET || 'super-secret-key-change-this')\r\nconst ALG = 'HS256'\r\n\r\nexport async function verifyPassword(password: string, hash: string): Promise<boolean> {\r\n    return bcrypt.compare(password, hash)\r\n}\r\n\r\nexport async function signToken(payload: { id: string; email: string }) {\r\n    return new SignJWT(payload)\r\n        .setProtectedHeader({ alg: ALG })\r\n        .setIssuedAt()\r\n        .setExpirationTime('24h')\r\n        .sign(SECRET_KEY)\r\n}\r\n\r\nexport async function verifyToken(token: string) {\r\n    try {\r\n        const { payload } = await jwtVerify(token, SECRET_KEY, {\r\n            algorithms: [ALG],\r\n        })\r\n        return payload\r\n    } catch (error) {\r\n        return null\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AACA;AAAA;AACA;;;AAEA,MAAM,aAAa,IAAI,cAAc,MAAM,CAAC,QAAQ,GAAG,CAAC,UAAU,IAAI;AACtE,MAAM,MAAM;AAEL,eAAe,eAAe,QAAgB,EAAE,IAAY;IAC/D,OAAO,8IAAM,CAAC,OAAO,CAAC,UAAU;AACpC;AAEO,eAAe,UAAU,OAAsC;IAClE,OAAO,IAAI,kKAAO,CAAC,SACd,kBAAkB,CAAC;QAAE,KAAK;IAAI,GAC9B,WAAW,GACX,iBAAiB,CAAC,OAClB,IAAI,CAAC;AACd;AAEO,eAAe,YAAY,KAAa;IAC3C,IAAI;QACA,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,IAAA,sKAAS,EAAC,OAAO,YAAY;YACnD,YAAY;gBAAC;aAAI;QACrB;QACA,OAAO;IACX,EAAE,OAAO,OAAO;QACZ,OAAO;IACX;AACJ"}},
    {"offset": {"line": 123, "column": 0}, "map": {"version":3,"sources":["file:///D:/Himanshu%20Kumar/Anti%20gravity/gaur/src/lib/admin/auth.ts"],"sourcesContent":["import { cookies } from 'next/headers';\r\nimport { verifyToken } from '@/lib/auth';\r\n\r\nexport async function getAdminSession() {\r\n    const cookieStore = await cookies();\r\n    const token = cookieStore.get('admin_token')?.value;\r\n\r\n    if (!token) return null;\r\n\r\n    return await verifyToken(token);\r\n}\r\n\r\nexport async function isAdmin() {\r\n    const session = await getAdminSession();\r\n    return !!session;\r\n}\r\n\r\nexport async function requireAdmin() {\r\n    const session = await getAdminSession();\r\n    if (!session) {\r\n        throw new Error('Unauthorized: Admin access required');\r\n    }\r\n    return true;\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;AAEO,eAAe;IAClB,MAAM,cAAc,MAAM,IAAA,4IAAO;IACjC,MAAM,QAAQ,YAAY,GAAG,CAAC,gBAAgB;IAE9C,IAAI,CAAC,OAAO,OAAO;IAEnB,OAAO,MAAM,IAAA,mIAAW,EAAC;AAC7B;AAEO,eAAe;IAClB,MAAM,UAAU,MAAM;IACtB,OAAO,CAAC,CAAC;AACb;AAEO,eAAe;IAClB,MAAM,UAAU,MAAM;IACtB,IAAI,CAAC,SAAS;QACV,MAAM,IAAI,MAAM;IACpB;IACA,OAAO;AACX"}},
    {"offset": {"line": 158, "column": 0}, "map": {"version":3,"sources":["file:///D:/Himanshu%20Kumar/Anti%20gravity/gaur/src/app/api/admin/hotel-catalogue/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\r\nimport { prisma } from '@/lib/prisma';\r\nimport { requireAdmin } from '@/lib/admin/auth';\r\n\r\nimport { Prisma } from '@prisma/client';\r\n\r\nexport const dynamic = 'force-dynamic';\r\n\r\n// GET - List all hotel amenities\r\nexport async function GET(request: NextRequest) {\r\n    try {\r\n        await requireAdmin();\r\n        const { searchParams } = new URL(request.url);\r\n        const page = parseInt(searchParams.get('page') || '1');\r\n        const limit = parseInt(searchParams.get('limit') || '50');\r\n        const search = searchParams.get('search') || '';\r\n        const category = searchParams.get('category') || '';\r\n\r\n        const where: Prisma.HotelAmenityWhereInput = {};\r\n\r\n        if (search) {\r\n            where.OR = [\r\n                { name: { contains: search, mode: 'insensitive' } },\r\n                { description: { contains: search, mode: 'insensitive' } },\r\n            ];\r\n        }\r\n\r\n        if (category && category !== 'ALL') {\r\n            where.category = category;\r\n        }\r\n\r\n        const [amenities, total] = await Promise.all([\r\n            prisma.hotelAmenity.findMany({\r\n                where,\r\n                orderBy: [\r\n                    { priority: 'desc' },\r\n                    { createdAt: 'desc' },\r\n                ],\r\n                skip: (page - 1) * limit,\r\n                take: limit,\r\n            }),\r\n            prisma.hotelAmenity.count({ where }),\r\n        ]);\r\n\r\n        return NextResponse.json({\r\n            amenities,\r\n            total,\r\n            page,\r\n            totalPages: Math.ceil(total / limit),\r\n        });\r\n    } catch (error) {\r\n        console.error('Error fetching hotel amenities:', error);\r\n        return NextResponse.json({ error: 'Failed to fetch amenities' }, { status: 500 });\r\n    }\r\n}\r\n\r\n// POST - Create new hotel amenity\r\nexport async function POST(request: NextRequest) {\r\n    try {\r\n        await requireAdmin();\r\n        const body = await request.json();\r\n\r\n        const {\r\n            name,\r\n            category,\r\n            description,\r\n            image,\r\n            price,\r\n            minOrderQty,\r\n            sizes,\r\n            packing,\r\n            contents,\r\n            material,\r\n            dimensions,\r\n            color,\r\n            isActive,\r\n            priority,\r\n        } = body;\r\n\r\n        const errors = [];\r\n        if (!name) errors.push('Product name is required');\r\n        if (!category) errors.push('Category is required');\r\n        if (!image) errors.push('Product image is required');\r\n        if (price === undefined || price === '' || isNaN(parseFloat(price))) errors.push('Valid price is required');\r\n\r\n        if (errors.length > 0) {\r\n            return NextResponse.json(\r\n                { error: errors.join(', ') },\r\n                { status: 400 }\r\n            );\r\n        }\r\n\r\n        const amenity = await prisma.hotelAmenity.create({\r\n            data: {\r\n                name,\r\n                category,\r\n                description: description || null,\r\n                image,\r\n                price: parseFloat(price),\r\n                minOrderQty: parseInt(minOrderQty) || 100,\r\n                sizes: sizes || null,\r\n                packing: packing || null,\r\n                contents: contents || null,\r\n                material: material || null,\r\n                dimensions: dimensions || null,\r\n                color: color || null,\r\n                isActive: isActive !== false,\r\n                priority: parseInt(priority) || 0,\r\n            },\r\n        });\r\n\r\n        return NextResponse.json(amenity);\r\n    } catch (error) {\r\n        console.error('Error creating hotel amenity:', error);\r\n        return NextResponse.json({ error: 'Failed to create amenity' }, { status: 500 });\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}}]
}